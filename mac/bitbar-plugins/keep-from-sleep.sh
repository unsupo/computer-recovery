#!/bin/bash
dir=~/keep-from-sleep
f=$dir/keep-from-sleep.jar
pid=$dir/keep-from-sleep.pid
mkdir -p $dir
if ! [ -f "$f" ]; then
  wget https://github.com/unsupo/keepfromsleep/raw/master/target/keep-from-sleep-1.0-SNAPSHOT.jar -O "$f" --quiet >/dev/null
fi

if [[ "$1" = "start" ]]; then
  java -jar $f &
  echo $! > $pid
elif [[ "$1" == "stop" ]]; then
  kill -9 $(cat $pid) && rm -f $pid
fi

[[ -f "$pid" ]] && echo "|image=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" \
        || echo "|image=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"
echo "---"
[[ -f "$pid" ]] && echo "Stop| bash='$0' param1=stop terminal=false refresh=true" \
        || echo "Start| bash='$0' param1=start terminal=false refresh=true";